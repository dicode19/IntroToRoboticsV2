Вимірювання відстаней
============================

Ехолокація тварин
~~~~~~~~~~~~~~~~~~~~~~~

Інформація про наше оточення допомагає нашим роботам виконувати складні завдання, такі як уникнення перешкод, навігація та планування маршруту. 

Подібним чином, тварини, такі як кажани, еволюціонували, щоб використовувати такі процеси, як ехолокація, яка дозволяє їм орієнтуватися в темних печерах і знаходити їжу, де тварини, такі як кажани, випромінюють високочастотні звукові хвилі за допомогою рота. Вони слухають відлуння звукових хвиль, що відбиваються від навколишнього середовища, своїми високочутливими вухами, що дозволяє їм визначати розмір, форму і текстуру об'єктів.

.. image:: media/batEcholocation.jpg

Роботизована ехолокація
~~~~~~~~~~~~~~~~~~~~~

Так само, як і кажани, роботи еволюціонували і отримали власні датчики відстані, які можуть надавати роботу більше інформації про його місцезнаходження відносно навколишнього середовища. Це дозволяє роботу приймати більш обґрунтовані рішення щодо навігації в навколишньому середовищі.

Отже, які датчики дозволяють вимірювати відстані?

Відбивні датчики
------------------

Лідар (Light Detection and Ranging), сонар (Sound Navigation and Ranging) і радар (Radio Detection and Ranging) працюють за одним і тим же принципом. Всі ці датчики мають один передавач, який «відправляє» сигнал, і приймач, який «слухає» відправлений сигнал. 

Типовим прикладом є ультразвуковий далекомір, який випромінює звукові хвилі і «слухає» відлуння. Потім датчик обчислює відстань на основі часу, за який звукова хвиля повертається назад.

.. tip::
  Оскільки ультразвуковий далекомір передбачає, що звукові хвилі відбиватимуться від плоскої стіни,      наведення далекоміра на похилу поверхню може призвести до неточних показань. Спробуйте навести         далекомір на різні поверхні та подивіться, як змінюються показання.

  Як би ви використовували цей датчик для визначення відстані до стіни, яка має кут нахилу? Яку інформацію про навколишнє середовище ви могли б використовувати для визначення відстані до поверхонь, що мають кут нахилу/вигин?

Механічні датчики
------------------

Іншим типом датчиків, які можуть безпосередньо інформувати робота про відстань, є
механічні датчики, такі як кінцеві вимикачі. Ці датчики працюють, відчуваючи
дотик до об'єкта, і можуть використовуватися для виявлення, коли робот досяг певної
точки в своєму оточенні.

Ці датчики працюють за принципом замикання ланцюга за допомогою магнітів або фізичної сили. 

Завершення ланцюга повідомляє роботу, що привід досяг певного
положення.
Наприклад, кінцевий вимикач може використовуватися для виявлення, коли робот досяг кінця траси.

Використання ультразвукового датчика
---------------------------

.. image:: media/setpointtarget.png

Під час використання XRP датчик відстані буде ультразвуковим далекоміром. Ось виклик методу для отримання відстані від датчика:

.. tab-set:: 

    .. tab-item:: Python

        .. code-block:: python

          rangefinder.distance()

    .. tab-item:: Blockly

        .. image:: media/sonardistance.png
            :width: 300
    
Ця функція повертає відстань у сантиметрах від датчика до найближчого об'єкта.


.. note:: Спробуйте!
  Спробуйте написати код, який перевіряє відстань кожні 50 мс (0,05 секунди) і виводить результат.

Ось відповідь:

.. tab-set:: 

    .. tab-item:: Python

        .. code-block:: python

          from XRPLib.defaults import *
          import time

          while True:
            print(rangefinder.distance())
            time.sleep(0.05)

    .. tab-item:: Blockly

        .. image:: media/printsonardistance.png
            :width: 300
